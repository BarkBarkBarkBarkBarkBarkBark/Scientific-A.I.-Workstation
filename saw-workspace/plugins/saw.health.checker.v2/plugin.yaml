id: saw.health.checker.v2
name: API Health Checker (via /api-health/report)
version: 0.1.1
description: Delegates to the SAW API single canonical health endpoint (POST /api-health/report)
  and returns a structured report (safe-by-default probing + optional cache artifact).
category_path: devtools/health
entrypoint:
  file: wrapper.py
  callable: main
environment:
  python: '>=3.11,<3.13'
  pip: []
inputs:
  endpoints_json:
    type: path
    default: machine-context/api_endpoints.json
    ui:
      label: (deprecated) api_endpoints.json
params:
  timeout_sec:
    type: number
    default: 3
    ui:
      label: Timeout (seconds)
  saw_api_url:
    type: string
    default: http://localhost:5127
    ui:
      label: SAW API base URL
  allow_ai:
    type: string
    default: 'false'
    ui:
      label: Allow AI-cost endpoints (true/false)
  allow_writes:
    type: string
    default: 'false'
    ui:
      label: Allow DB/file write endpoints (true/false)
  allow_plugins:
    type: string
    default: 'false'
    ui:
      label: Allow plugin-execution endpoints (true/false)
  allow_benign_writes:
    type: string
    default: 'true'
    ui:
      label: Allow benign writes (audit/event)
  use_cache:
    type: string
    default: 'true'
    ui:
      label: Use cached report when fresh
  max_age_sec:
    type: number
    default: 30
    ui:
      label: Cache max age (seconds)
  write_cache:
    type: string
    default: 'true'
    ui:
      label: Write cache artifact (api_health_report.json)
outputs:
  ok:
    type: boolean
  report:
    type: object
  error:
    type: string
execution:
  deterministic: false
  cacheable: false
side_effects:
  network: allowed
  disk: read_only
  subprocess: forbidden
resources:
  gpu: forbidden
  threads: 1
